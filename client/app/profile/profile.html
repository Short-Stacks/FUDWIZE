<div class="profile container" ng-controller="ProfileCtrl as ctrl">

  <nav-bar></nav-bar>

  <div class="row profile-header">

    <div class="col-md-3 text-center icon">
      <img src="{{ ctrl.data.imageUrl }}" width="220px" height="220px" alt="http://placehold.it/200x200" class="profilepic">
    </div> <!-- /icon -->

    <div class="col-md-9 main-contact">
      <h1>{{ ctrl.data.contactInfo.name }}</h1>
      <p>{{ ctrl.data.contactInfo.streetName }}</p>
      <p>{{ ctrl.data.contactInfo.cityStateZip }}</p>
    </div> <!-- /main-contact -->

  </div> <!-- /row profile-header -->

  <div class="row profile-body">

    <div ng-show="ctrl.type == 'rst'" class="col-md-3 sidebar">
      <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>

      <p><legend>Phone</legend> {{ ctrl.data.contactInfo.phoneNumber }}</p>
      <!--Website link not currently functional-->
      <p><legend>Website</legend><a ng-click="ctrl.goToLink(ctrl.data.websiteUrl)">{{ ctrl.data.websiteUrl }}</a></p>
      <p><legend>Additional Info</legend> {{ ctrl.data.additional.aboutUs }}</p>
    </div> <!-- /rst sidebar -->

    <div ng-show="ctrl.type == 'fbk'" class="col-md-3 sidebar">
      <p><legend>Mission Statement</legend> {{ ctrl.data.additional.aboutUs }}</p>
      <p><legend>Website</legend><a ng-click="ctrl.goToLink(ctrl.data.websiteUrl)">{{ ctrl.data.websiteUrl }}</a></p>
      <p><legend>Additional Info</legend> {{ ctrl.data.additional.mission }} </p>
    </div> <!-- /fbk sidebar -->



    <!-- Display restaurant's food donation data as checkboxes that can be changed when the user
    clicks on the Submit Changes button -->
    <div ng-show="ctrl.type == 'rst'" class="col-md-9 main-content">
      <div class="col-md-6">
        <legend>Type of Meals You Can Donate</legend>
        <div ng-repeat="(key, value) in ctrl.data.foodData.mealType" >
          <input id="checkbox" type="checkbox" ng-model="ctrl.data.foodData.mealType[key]"/> {{ key }}
        </div>
      </div>

      <div class="col-md-6">
        <legend>Type of Food</legend>
        <div ng-repeat="(key, value) in ctrl.data.foodData.foodType" >
          <input type="checkbox" ng-model="ctrl.data.foodData.foodType[key]"/> {{ key }}
        </div>
      </div>

      <br>

      <div class="col-md-6">
        <legend>Day(s) Available For Food Pickup</legend>
        <div ng-repeat="(key, value) in ctrl.data.foodData.pickupDay" >
          <input type="checkbox" ng-model="ctrl.data.foodData.pickupDay[key]"/> {{ key }}
        </div>
      </div>

      <div class="col-md-6">
        <legend>Pickup Time</legend>
        <div ng-repeat="(key, value) in ctrl.data.foodData.pickupTime" >
          <input type="checkbox" ng-model="ctrl.data.foodData.pickupTime[key]"/> {{ key }}
        </div>
      </div>

    </div> <!-- /main-content -->

          <!-- Submit button to Update Profile -->
    <div class="update" ng-show="ctrl.type == 'rst'">
      <button ng-hide="updated" class="btn btn-primary btn-md submit" type="submit" id="submit" value="Submit" ng-click="ctrl.updateProfile()">Update Profile</button>
      <span class="update-prompt">{{ ctrl.updateConfirmation }}</span>
    </div>



    <!-- Displays foodbank's connections in main body of profile -->

    <div ng-show="ctrl.type == 'fbk'" class="col-md-9 main-content">
      <h3>Connections</h3>
      <div ng-repeat="connection in ctrl.connections">
        <legend>{{ connection.contactInfo.name }}</legend>
        <p><strong>Phone: </strong>{{ connection.contactInfo.phoneNumber }}</p>
        <p><strong>Email: </strong>{{ connection.contactInfo.email }}</p>
        <p><strong>Website URL: </strong>{{ connection.websiteUrl }}</p>

        <p ng-repeat="foodData in connection.foodData" ng-show="{{ foodData }}">{{ foodData }}</p>
      </div>
    </div>

  </div> <!-- /row profile-body -->

</div> <!-- /profile-container -->

